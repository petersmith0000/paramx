import React, { useEffect, useRef } from "react";
import { createChart, CandlestickSeries, ColorType } from 'lightweight-charts';
import TradeMonitorHeading from "./TradeMonitorHeading";
import TradeMonitorLogs from "./TradeMonitorLogs";

// Sample data (only a snippet for brevity)

const TradeMonitor = ({selectedMaturity, setSelectedMaturity}) => {
  // const chartContainerRef = useRef(null);

  // useEffect(() => {
  //   // Map data to the chart's format
  //   const chartData = data.data.map((entry) => ({
  //     time: new Date(entry.dt).getTime() / 1000, // Convert to Unix timestamp (in seconds)
  //     open: entry.o,
  //     high: entry.h,
  //     low: entry.l,
  //     close: entry.c,
  //   }));
  //   // Create the chart instance
  //   const chart = createChart(chartContainerRef.current, 
  //   {
  //     width: chartContainerRef.current.clientWidth,
  //     height: 400, // You can adjust this based on your layout
  //     layout: {
  //       background: { type: ColorType.Solid, color: "transparent" },
  //       textColor : 'white',
  //       },
  //   });

  //   // Add candlestick series to the chart
  //   const candlestickSeries = chart.addSeries(CandlestickSeries, {
  //     upColor: '#4fff78',
  //     downColor: '#ff4976',
  //     borderUpColor: '#4fff78',
  //     borderDownColor: '#ff4976',
  //     wickUpColor: '#4fff78',
  //     wickDownColor: '#ff4976',
  //   });

  //   // Set the candlestick data
  //   candlestickSeries.setData(chartData);

  //   // Cleanup on component unmount
  //   return () => {
  //     chart.remove();
  //   };
  // }, []);

  return (
    <div className="w-full px-2 pt-5 border rounded border-borderColor border-opacity-30 shadow-cardShadow bg-themeBlue">
      {/* Heading */}
      <TradeMonitorHeading selectedMaturity={selectedMaturity} setSelectedMaturity={setSelectedMaturity} />

      {/* Chart Container */}
      {/* <div ref={chartContainerRef} style={{ position: "relative" }}></div> */}

      {/* Logs */}
      {/* <TradeMonitorLogs /> */}
    </div>
  );
};

export default TradeMonitor;


const data = 
{
    "meta": {},
    "data": [
      {
        "dt": "2024-11-01T00:00:00.000Z",
        "o": 102.01996938818834,
        "h": 102.01996938818834,
        "l": -15.339554838074632,
        "c": -15.339554838074632
      },
      {
        "dt": "2024-11-02T00:00:00.000Z",
        "o": -15.339554838074632,
        "h": 21.1009522518006,
        "l": -15.339554838074632,
        "c": 21.1009522518006
      },
      {
        "dt": "2024-11-03T00:00:00.000Z",
        "o": 21.1009522518006,
        "h": 21.1009522518006,
        "l": -4.659631737180991,
        "c": -4.659631737180991
      },
      {
        "dt": "2024-11-04T00:00:00.000Z",
        "o": -4.659631737180991,
        "h": -4.659631737180991,
        "l": -47.37138453854147,
        "c": -47.37138453854147
      },
      {
        "dt": "2024-11-05T00:00:00.000Z",
        "o": -47.37138453854147,
        "h": 112.34878864099383,
        "l": -47.37138453854147,
        "c": 112.34878864099383
      },
      {
        "dt": "2024-11-06T00:00:00.000Z",
        "o": 112.34878864099383,
        "h": 112.34878864099383,
        "l": 6.4180705275935335,
        "c": 6.4180705275935335
      },
      {
        "dt": "2024-11-07T00:00:00.000Z",
        "o": 6.4180705275935335,
        "h": 6.4180705275935335,
        "l": -32.96784910933444,
        "c": -32.96784910933444
      },
      {
        "dt": "2024-11-08T00:00:00.000Z",
        "o": -32.96784910933444,
        "h": 20.779881576904003,
        "l": -32.96784910933444,
        "c": 20.779881576904003
      },
      {
        "dt": "2024-11-09T00:00:00.000Z",
        "o": 20.779881576904003,
        "h": 20.779881576904003,
        "l": -15.68865738459937,
        "c": -15.68865738459937
      },
      {
        "dt": "2024-11-10T00:00:00.000Z",
        "o": -15.68865738459937,
        "h": 18.07594635159575,
        "l": -15.68865738459937,
        "c": 18.07594635159575
      },
      {
        "dt": "2024-11-11T00:00:00.000Z",
        "o": 18.07594635159575,
        "h": 18.07594635159575,
        "l": -4.941276919984938,
        "c": -4.941276919984938
      },
      {
        "dt": "2024-11-12T00:00:00.000Z",
        "o": -4.941276919984938,
        "h": -4.941276919984938,
        "l": -5.893545254309784,
        "c": -5.893545254309784
      },
      {
        "dt": "2024-11-13T00:00:00.000Z",
        "o": -5.893545254309784,
        "h": 2.965675880789842,
        "l": -5.893545254309784,
        "c": 2.965675880789842
      },
      {
        "dt": "2024-11-14T00:00:00.000Z",
        "o": 2.965675880789842,
        "h": 2.965675880789842,
        "l": -6.585025369770281,
        "c": -6.585025369770281
      },
      {
        "dt": "2024-11-15T00:00:00.000Z",
        "o": -6.585025369770281,
        "h": -3.1481571787008833,
        "l": -6.585025369770281,
        "c": -3.1481571787008833
      },
      {
        "dt": "2024-11-16T00:00:00.000Z",
        "o": -3.1481571787008833,
        "h": 0.13548210643721248,
        "l": -3.1481571787008833,
        "c": 0.13548210643721248
      },
      {
        "dt": "2024-11-17T00:00:00.000Z",
        "o": 0.13548210643721248,
        "h": 0.13548210643721248,
        "l": -8.617284863333463,
        "c": -8.617284863333463
      },
      {
        "dt": "2024-11-18T00:00:00.000Z",
        "o": -8.617284863333463,
        "h": 5.260568986462766,
        "l": -8.617284863333463,
        "c": 5.260568986462766
      },
      {
        "dt": "2024-11-19T00:00:00.000Z",
        "o": 5.260568986462766,
        "h": 5.260568986462766,
        "l": -7.3524410368475674,
        "c": -7.3524410368475674
      },
      {
        "dt": "2024-11-20T00:00:00.000Z",
        "o": -7.3524410368475674,
        "h": -1.5435818925429112,
        "l": -7.3524410368475674,
        "c": -1.5435818925429112
      },
      {
        "dt": "2024-11-21T00:00:00.000Z",
        "o": -1.5435818925429112,
        "h": 2.5393822292694823,
        "l": -1.5435818925429112,
        "c": 2.5393822292694823
      },
      {
        "dt": "2024-11-22T00:00:00.000Z",
        "o": 2.5393822292694823,
        "h": 2.5393822292694823,
        "l": -10.165069665378446,
        "c": -10.165069665378446
      },
      {
        "dt": "2024-11-23T00:00:00.000Z",
        "o": -10.165069665378446,
        "h": 9.042536106745303,
        "l": -10.165069665378446,
        "c": 9.042536106745303
      },
      {
        "dt": "2024-11-24T00:00:00.000Z",
        "o": 9.042536106745303,
        "h": 9.042536106745303,
        "l": -5.118390965981179,
        "c": -5.118390965981179
      },
      {
        "dt": "2024-11-25T00:00:00.000Z",
        "o": -5.118390965981179,
        "h": -3.1047789592370534,
        "l": -5.118390965981179,
        "c": -3.1047789592370534
      },
      {
        "dt": "2024-11-26T00:00:00.000Z",
        "o": -3.1047789592370534,
        "h": -1.833099546404493,
        "l": -3.1047789592370534,
        "c": -1.833099546404493
      },
      {
        "dt": "2024-11-27T00:00:00.000Z",
        "o": -1.833099546404493,
        "h": -1.833099546404493,
        "l": -10.14172149988829,
        "c": -10.14172149988829
      },
      {
        "dt": "2024-11-28T00:00:00.000Z",
        "o": -10.14172149988829,
        "h": 4.814406807174998,
        "l": -10.14172149988829,
        "c": 4.814406807174998
      },
      {
        "dt": "2024-11-29T00:00:00.000Z",
        "o": 4.814406807174998,
        "h": 4.814406807174998,
        "l": -2.2852896989108418,
        "c": -2.2852896989108418
      },
      {
        "dt": "2024-11-30T00:00:00.000Z",
        "o": -2.2852896989108418,
        "h": -2.2852896989108418,
        "l": -2.5858694111970615,
        "c": -2.5858694111970615
      },
      {
        "dt": "2024-12-01T00:00:00.000Z",
        "o": -2.5858694111970615,
        "h": -2.4569695752831078,
        "l": -2.5858694111970615,
        "c": -2.4569695752831078
      },
      {
        "dt": "2024-12-02T00:00:00.000Z",
        "o": -2.4569695752831078,
        "h": -2.4569695752831078,
        "l": -2.5968931450095822,
        "c": -2.5968931450095822
      },
      {
        "dt": "2024-12-03T00:00:00.000Z",
        "o": -2.5968931450095822,
        "h": -2.5968931450095822,
        "l": -9.215747544670982,
        "c": -9.215747544670982
      },
      {
        "dt": "2024-12-04T00:00:00.000Z",
        "o": -9.215747544670982,
        "h": -0.444193805756421,
        "l": -9.215747544670982,
        "c": -0.444193805756421
      },
      {
        "dt": "2024-12-05T00:00:00.000Z",
        "o": -0.444193805756421,
        "h": -0.444193805756421,
        "l": -4.844040903495738,
        "c": -4.844040903495738
      },
      {
        "dt": "2024-12-06T00:00:00.000Z",
        "o": -4.844040903495738,
        "h": 4.993053509977985,
        "l": -4.844040903495738,
        "c": 4.993053509977985
      },
      {
        "dt": "2024-12-07T00:00:00.000Z",
        "o": 4.993053509977985,
        "h": 4.993053509977985,
        "l": -3.740360979409385,
        "c": -3.740360979409385
      },
      {
        "dt": "2024-12-08T00:00:00.000Z",
        "o": -3.740360979409385,
        "h": -0.7739498562524649,
        "l": -3.740360979409385,
        "c": -0.7739498562524649
      },
      {
        "dt": "2024-12-09T00:00:00.000Z",
        "o": -0.7739498562524649,
        "h": -0.7739498562524649,
        "l": -2.448293818208269,
        "c": -2.448293818208269
      },
      {
        "dt": "2024-12-10T00:00:00.000Z",
        "o": -2.448293818208269,
        "h": 3.7393253495277223,
        "l": -2.448293818208269,
        "c": 3.7393253495277223
      },
      {
        "dt": "2024-12-11T00:00:00.000Z",
        "o": 3.7393253495277223,
        "h": 3.7393253495277223,
        "l": -9.15117818236565,
        "c": -9.15117818236565
      },
      {
        "dt": "2024-12-12T00:00:00.000Z",
        "o": -9.15117818236565,
        "h": -9.15117818236565,
        "l": -9.829565533058204,
        "c": -9.829565533058204
      },
      {
        "dt": "2024-12-13T00:00:00.000Z",
        "o": -9.829565533058204,
        "h": 7.93254753093775,
        "l": -9.829565533058204,
        "c": 7.93254753093775
      },
      {
        "dt": "2024-12-14T00:00:00.000Z",
        "o": 7.93254753093775,
        "h": 7.93254753093775,
        "l": -5.586570632370891,
        "c": -5.586570632370891
      },
      {
        "dt": "2024-12-15T00:00:00.000Z",
        "o": -5.586570632370891,
        "h": -5.586570632370891,
        "l": -8.276049569216127,
        "c": -8.276049569216127
      },
      {
        "dt": "2024-12-16T00:00:00.000Z",
        "o": -8.276049569216127,
        "h": -0.42092296609791413,
        "l": -8.276049569216127,
        "c": -0.42092296609791413
      },
      {
        "dt": "2024-12-17T00:00:00.000Z",
        "o": -0.42092296609791413,
        "h": 5.441533442903812,
        "l": -0.42092296609791413,
        "c": 5.441533442903812
      },
      {
        "dt": "2024-12-18T00:00:00.000Z",
        "o": 5.441533442903812,
        "h": 5.441533442903812,
        "l": -6.010831054830412,
        "c": -6.010831054830412
      },
      {
        "dt": "2024-12-19T00:00:00.000Z",
        "o": -6.010831054830412,
        "h": -1.9285604908212406,
        "l": -6.010831054830412,
        "c": -1.9285604908212406
      },
      {
        "dt": "2024-12-20T00:00:00.000Z",
        "o": -1.9285604908212406,
        "h": -1.9285604908212406,
        "l": -2.103384772836936,
        "c": -2.103384772836936
      },
      {
        "dt": "2024-12-21T00:00:00.000Z",
        "o": -2.103384772836936,
        "h": 2.0161807263073594,
        "l": -2.103384772836936,
        "c": 2.0161807263073594
      },
      {
        "dt": "2024-12-22T00:00:00.000Z",
        "o": 2.0161807263073594,
        "h": 2.0161807263073594,
        "l": -15.842511523138459,
        "c": -15.842511523138459
      },
      {
        "dt": "2024-12-23T00:00:00.000Z",
        "o": -15.842511523138459,
        "h": 8.798511165275436,
        "l": -15.842511523138459,
        "c": 8.798511165275436
      },
      {
        "dt": "2024-12-24T00:00:00.000Z",
        "o": 8.798511165275436,
        "h": 8.798511165275436,
        "l": -3.97968514633551,
        "c": -3.97968514633551
      },
      {
        "dt": "2024-12-25T00:00:00.000Z",
        "o": -3.97968514633551,
        "h": -3.97968514633551,
        "l": -8.931728701090814,
        "c": -8.931728701090814
      },
      {
        "dt": "2024-12-26T00:00:00.000Z",
        "o": -8.931728701090814,
        "h": -3.096288348745091,
        "l": -8.931728701090814,
        "c": -3.096288348745091
      },
      {
        "dt": "2024-12-27T00:00:00.000Z",
        "o": -3.096288348745091,
        "h": 3.0250602985222086,
        "l": -3.096288348745091,
        "c": 3.0250602985222086
      },
      {
        "dt": "2024-12-28T00:00:00.000Z",
        "o": 3.0250602985222086,
        "h": 3.0250602985222086,
        "l": -0.9778118665886515,
        "c": -0.9778118665886515
      },
      {
        "dt": "2024-12-29T00:00:00.000Z",
        "o": -0.9778118665886515,
        "h": 2.168722182935734,
        "l": -0.9778118665886515,
        "c": 2.168722182935734
      },
      {
        "dt": "2024-12-30T00:00:00.000Z",
        "o": 2.168722182935734,
        "h": 2.168722182935734,
        "l": -9.180168952235569,
        "c": -9.180168952235569
      },
      {
        "dt": "2024-12-31T00:00:00.000Z",
        "o": -9.180168952235569,
        "h": -0.2174694522690479,
        "l": -9.180168952235569,
        "c": -0.2174694522690479
      },
      {
        "dt": "2025-01-01T00:00:00.000Z",
        "o": -0.2174694522690479,
        "h": -0.2174694522690479,
        "l": -3.8353633854107394,
        "c": -3.8353633854107394
      },
      {
        "dt": "2025-01-02T00:00:00.000Z",
        "o": -3.8353633854107394,
        "h": -1.3007043973347843,
        "l": -3.8353633854107394,
        "c": -1.3007043973347843
      },
      {
        "dt": "2025-01-03T00:00:00.000Z",
        "o": -1.3007043973347843,
        "h": -1.3007043973347843,
        "l": -6.523327473534746,
        "c": -6.523327473534746
      },
      {
        "dt": "2025-01-04T00:00:00.000Z",
        "o": -6.523327473534746,
        "h": 2.540049421872803,
        "l": -6.523327473534746,
        "c": 2.540049421872803
      },
      {
        "dt": "2025-01-05T00:00:00.000Z",
        "o": 2.540049421872803,
        "h": 2.540049421872803,
        "l": -3.3254999147210085,
        "c": -3.3254999147210085
      },
      {
        "dt": "2025-01-06T00:00:00.000Z",
        "o": -3.3254999147210085,
        "h": -0.561259147948745,
        "l": -3.3254999147210085,
        "c": -0.561259147948745
      },
      {
        "dt": "2025-01-07T00:00:00.000Z",
        "o": -0.561259147948745,
        "h": -0.561259147948745,
        "l": -4.7302971506351765,
        "c": -4.7302971506351765
      },
      {
        "dt": "2025-01-08T00:00:00.000Z",
        "o": -4.7302971506351765,
        "h": -3.125961726544424,
        "l": -4.7302971506351765,
        "c": -3.125961726544424
      },
      {
        "dt": "2025-01-09T00:00:00.000Z",
        "o": -3.125961726544424,
        "h": -2.5843434935621246,
        "l": -3.125961726544424,
        "c": -2.5843434935621246
      },
      {
        "dt": "2025-01-10T00:00:00.000Z",
        "o": -2.5843434935621246,
        "h": -2.5843434935621246,
        "l": -5.832500847177702,
        "c": -5.832500847177702
      },
      {
        "dt": "2025-01-11T00:00:00.000Z",
        "o": -5.832500847177702,
        "h": -2.5736146825239947,
        "l": -5.832500847177702,
        "c": -2.5736146825239947
      },
      {
        "dt": "2025-01-12T00:00:00.000Z",
        "o": -2.5736146825239947,
        "h": 2.568225382166478,
        "l": -2.5736146825239947,
        "c": 2.568225382166478
      },
      {
        "dt": "2025-01-13T00:00:00.000Z",
        "o": 2.568225382166478,
        "h": 2.568225382166478,
        "l": -0.9280560701117935,
        "c": -0.9280560701117935
      },
      {
        "dt": "2025-01-14T00:00:00.000Z",
        "o": -0.9280560701117935,
        "h": -0.9280560701117935,
        "l": -4.713667053217585,
        "c": -4.713667053217585
      },
      {
        "dt": "2025-01-15T00:00:00.000Z",
        "o": -4.713667053217585,
        "h": -4.713667053217585,
        "l": -6.0868045129521935,
        "c": -6.0868045129521935
      },
      {
        "dt": "2025-01-16T00:00:00.000Z",
        "o": -6.0868045129521935,
        "h": 0.6118772600641087,
        "l": -6.0868045129521935,
        "c": 0.6118772600641087
      },
      {
        "dt": "2025-01-17T00:00:00.000Z",
        "o": 0.6118772600641087,
        "h": 0.6118772600641087,
        "l": -6.13850891222727,
        "c": -6.13850891222727
      },
      {
        "dt": "2025-01-18T00:00:00.000Z",
        "o": -6.13850891222727,
        "h": 1.7490589809142199,
        "l": -6.13850891222727,
        "c": 1.7490589809142199
      },
      {
        "dt": "2025-01-19T00:00:00.000Z",
        "o": 1.7490589809142199,
        "h": 1.7490589809142199,
        "l": -9.440216107529976,
        "c": -9.440216107529976
      },
      {
        "dt": "2025-01-20T00:00:00.000Z",
        "o": -9.440216107529976,
        "h": 4.784369419483947,
        "l": -9.440216107529976,
        "c": 4.784369419483947
      },
      {
        "dt": "2025-01-21T00:00:00.000Z",
        "o": 4.784369419483947,
        "h": 4.784369419483947,
        "l": -10.161150468505353,
        "c": -10.161150468505353
      },
      {
        "dt": "2025-01-22T00:00:00.000Z",
        "o": -10.161150468505353,
        "h": 6.505971145276979,
        "l": -10.161150468505353,
        "c": 6.505971145276979
      },
      {
        "dt": "2025-01-23T00:00:00.000Z",
        "o": 6.505971145276979,
        "h": 6.505971145276979,
        "l": -2.796024157058963,
        "c": -2.796024157058963
      },
      {
        "dt": "2025-01-24T00:00:00.000Z",
        "o": -2.796024157058963,
        "h": -2.5291703501039375,
        "l": -2.796024157058963,
        "c": -2.5291703501039375
      },
      {
        "dt": "2025-01-25T00:00:00.000Z",
        "o": -2.5291703501039375,
        "h": -2.10429749139861,
        "l": -2.5291703501039375,
        "c": -2.10429749139861
      },
      {
        "dt": "2025-01-26T00:00:00.000Z",
        "o": -2.10429749139861,
        "h": 1.1929663395701784,
        "l": -2.10429749139861,
        "c": 1.1929663395701784
      },
      {
        "dt": "2025-01-27T00:00:00.000Z",
        "o": 1.1929663395701784,
        "h": 1.1929663395701784,
        "l": -10.638245581905858,
        "c": -10.638245581905858
      },
      {
        "dt": "2025-01-28T00:00:00.000Z",
        "o": -10.638245581905858,
        "h": 3.165273720759232,
        "l": -10.638245581905858,
        "c": 3.165273720759232
      },
      {
        "dt": "2025-01-29T00:00:00.000Z",
        "o": 3.165273720759232,
        "h": 3.165273720759232,
        "l": -2.4927448628348503,
        "c": -2.4927448628348503
      },
      {
        "dt": "2025-01-30T00:00:00.000Z",
        "o": -2.4927448628348503,
        "h": -2.4927448628348503,
        "l": -5.84886273566767,
        "c": -5.84886273566767
      },
      {
        "dt": "2025-01-31T00:00:00.000Z",
        "o": -5.84886273566767,
        "h": -5.2680655580314095,
        "l": -5.84886273566767,
        "c": -5.2680655580314095
      },
      {
        "dt": "2025-02-01T00:00:00.000Z",
        "o": -5.2680655580314095,
        "h": 4.39368420326911,
        "l": -5.2680655580314095,
        "c": 4.39368420326911
      },
      {
        "dt": "2025-02-02T00:00:00.000Z",
        "o": 4.39368420326911,
        "h": 4.39368420326911,
        "l": -1.9930166660503956,
        "c": -1.9930166660503956
      },
      {
        "dt": "2025-02-03T00:00:00.000Z",
        "o": -1.9930166660503956,
        "h": -1.9930166660503956,
        "l": -9.33002477273337,
        "c": -9.33002477273337
      },
      {
        "dt": "2025-02-04T00:00:00.000Z",
        "o": -9.33002477273337,
        "h": -0.7914825144223814,
        "l": -9.33002477273337,
        "c": -0.7914825144223814
      },
      {
        "dt": "2025-02-05T00:00:00.000Z",
        "o": -0.7914825144223814,
        "h": -0.7914825144223814,
        "l": -0.8360720070791916,
        "c": -0.8360720070791916
      },
      {
        "dt": "2025-02-06T00:00:00.000Z",
        "o": -0.8360720070791916,
        "h": -0.8360720070791916,
        "l": -4.199612302679068,
        "c": -4.199612302679068
      },
      {
        "dt": "2025-02-07T00:00:00.000Z",
        "o": -4.199612302679068,
        "h": -3.368356940754058,
        "l": -4.199612302679068,
        "c": -3.368356940754058
      },
      {
        "dt": "2025-02-08T00:00:00.000Z",
        "o": -3.368356940754058,
        "h": 5.024359303177306,
        "l": -3.368356940754058,
        "c": 5.024359303177306
      },
      {
        "dt": "2025-02-09T00:00:00.000Z",
        "o": 5.024359303177306,
        "h": 5.024359303177306,
        "l": -9.078076747315455,
        "c": -9.078076747315455
      },
      {
        "dt": "2025-02-10T00:00:00.000Z",
        "o": -9.078076747315455,
        "h": 5.876650038985298,
        "l": -9.078076747315455,
        "c": 5.876650038985298
      }
    ]
  }